<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Actualización del Disco</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

<div class="container">

    <div class="mt-3 mb-3">
        <h3>Actualización del Disco</h3>
    </div>

    <!-- Formulario para editar el disco -->
    <form th:object="${discoDto}" th:action="@{/disk/editar-confirm}" method="post" id="discoForm">

        <!-- Campo oculto para el ID del disco (no editable) -->
        <div class="mb-3 row">
            <label for="discoId" class="col-sm-2">ID del Disco</label>
            <div class="col-sm-9">
                <input type="text" id="discoId" class="form-control" th:field="*{id}" readonly>
            </div>
        </div>

        <!-- Campo para el nombre del disco -->
        <div class="mb-3 row">
            <label for="nombreDisco" class="col-sm-2">Nombre del Disco</label>
            <div class="col-sm-9">
                <input type="text" id="nombreDisco" class="form-control" th:field="*{nombre}" required>
            </div>
        </div>

        <!-- Campo para el artista -->
        <div class="mb-3 row">
            <label for="artista" class="col-sm-2">Artista</label>
            <div class="col-sm-9">
                <input type="text" id="artista" class="form-control" th:field="*{artista}" required>
            </div>
        </div>

        <!-- Campo para la discográfica -->
        <div class="mb-3 row">
            <label for="discografica" class="col-sm-2">Discográfica</label>
            <div class="col-sm-9">
                <input type="text" id="discografica" class="form-control" th:field="*{discografica}" required>
            </div>
        </div>

        <!-- Campo para el año de lanzamiento -->
        <div class="mb-3 row">
            <label for="anioLanzamiento" class="col-sm-2">Año de Lanzamiento</label>
            <div class="col-sm-9">
                <input type="number" id="anioLanzamiento" class="form-control" th:field="*{anio}" required>
            </div>
        </div>

        <!-- Campo para el precio -->
        <div class="mb-3 row">
            <label for="precio" class="col-sm-2">Precio</label>
            <div class="col-sm-9">
                <input type="number" step="0.01" id="precio" class="form-control" th:field="*{precio}" required>
            </div>
        </div>

        <!-- Campo para el género -->
        <div class="mb-3 row">
            <label for="genero" class="col-sm-2">Género</label>
            <div class="col-sm-9">
                <input type="text" id="genero" class="form-control" th:field="*{genero}" required>
            </div>
        </div>

        <!-- Botones para enviar el formulario o regresar -->
        <div class="mb-3 row">
            <label for="btnActualizar" class="col-sm-2"></label>
            <div class="col-sm-9">
                <!-- Botón para abrir el modal de confirmación -->
                <button type="button" id="btnActualizar" class="btn btn-primary w-25" data-bs-toggle="modal" data-bs-target="#confirmModal">
                    Actualizar
                </button>

                <button type="button" id="btnRegresar" class="btn btn-secondary w-25"
                        onclick="location.href='/manage/start'">
                    Regresar
                </button>
            </div>
        </div>

    </form>

    <!-- Modal de confirmación -->
    <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalLabel">Confirmación de Actualización</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ¿Estás seguro de que deseas guardar los cambios? Esta acción no se puede deshacer.
                </div>
                <div class="modal-footer">
                    <!-- Botón para confirmar actualización -->
                    <button type="button" class="btn btn-danger" onclick="submitForm()">Confirmar</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    // Función para enviar el formulario cuando se confirma la actualización
    function submitForm() {
        const nombre = document.getElementById("nombreDisco").value.trim();
        const artista = document.getElementById("artista").value.trim();
        const anioLanzamiento = document.getElementById("anioLanzamiento").value.trim();
        const genero = document.getElementById("genero").value.trim();
        const precio = document.getElementById("precio").value.trim();

        // Validación de campos vacíos
        if (!nombre || !artista || !anioLanzamiento || !genero || !precio) {
            alert("Por favor, completa todos los campos antes de continuar.");
            return;
        }

        // Si todo está correcto, se envía el formulario
        document.getElementById("discoForm").submit();
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>
</html>
